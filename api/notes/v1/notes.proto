syntax = "proto3";

option go_package = "github.com/evgeniy-krivenko/grpc-notes/pgk/api/v1";

import "api/notes/v1/messages.proto";
import "google/api/annotations.proto";

package api.notest.v1;

service NoteAPI {
  rpc CreateNote(CreateNoteRequest) returns (CreateNoteResponse) {
    option (google.api.http) = {
      post: "/v1/notes"
      body: "*"
    };
  }

  rpc GetNotes(GetNotesRequest) returns (GetNotesResponse) {
    option (google.api.http) = {
      get: "/v1/notes"
    };
  }

  rpc GetNote(GetNoteRequest) returns (GetNoteResponse) {
    option (google.api.http) = {
      get: "/v1/notes/{note_id}"
    };
  }

  rpc DeleteNote(DeleteNoteRequest) returns (DeleteNoteResponse) {
    option (google.api.http) = {
      delete: "/v1/notes/{note_id}"
    };
  }

  rpc SubscribeToEvents(SubscribeToEventRequest)
      returns (stream SubscribeToEventResponse);

  rpc UploadMetrics(stream MetricsRequest) returns (SummaryResponse);

  rpc Chat(stream Message) returns (stream ServerMessage) {
    option (google.api.http) = {
      get: "/v1/chat"
    };
  }
}
